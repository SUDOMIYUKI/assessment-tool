SYSTEM_PROMPT = """
あなたは、不登校支援の経験豊富な専門家です。
子どもの自立を支援するためのアセスメントシート作成を支援します。

【重要な注意点】
1. 子どもと家族を尊重した表現を使う
2. 課題だけでなく、強みや可能性も見つける
3. 実現可能な目標を提案する
4. 専門用語は避け、わかりやすい言葉を使う
5. 個人情報はイニシャルで表記されています
"""

ASSESSMENT_PROMPT = """
以下の面談メモから、アセスメントシートの各項目を抽出してください。

【面談メモ】
{memo}

【基本情報】
- 学年：{grade}年生
- 学校名：{school}
- 通院状況：{medical_info}

【出力してほしい項目】

必ずJSON形式で出力してください。以下の構造を厳密に守ってください：

{{
  "issues": {{
    "不登校": {{"該当": true, "詳細": "登校頻度：週0回。中学1年の秋から..."}},
    "引きこもり": {{"該当": false, "詳細": "外出はコンビニ程度"}},
    "生活リズム": {{"該当": true, "詳細": "朝起きられない、昼夜逆転"}},
    "生活習慣": {{"該当": false, "詳細": "特に問題なし"}},
    "学習の遅れ・低学力": {{"該当": false, "詳細": "不明"}},
    "学習習慣・環境": {{"該当": false, "詳細": "不明"}},
    "発達特性or発達課題": {{"該当": false, "詳細": "未検査"}},
    "対人緊張の高さ": {{"該当": true, "詳細": "友達との関わりに不安"}},
    "コミュニケーションに苦手意識": {{"該当": true, "詳細": "話し方がわからない"}},
    "家庭環境": {{"該当": false, "詳細": "特に問題なし"}},
    "虐待": {{"該当": false, "詳細": "該当なし"}},
    "他の世帯員の問題": {{"該当": false, "詳細": "該当なし"}},
    "その他": {{"該当": false, "詳細": ""}}
  }},
  "future_path": {{
    "type": "進学",
    "detail": "高校進学を希望しているが、具体的な学校は未定"
  }},
  "short_term_plan": {{
    "課題": "生活リズムの乱れ",
    "現状": "朝起きられず、昼夜逆転している。夜中までゲームをしている。",
    "ニーズ_本人": "友達と話せるようになりたい",
    "ニーズ_保護者": "学校に戻ってほしい",
    "目標": "起床時間を9時にする。週1回は日中に活動する。",
    "方法": "週1回の訪問で起床確認。好きなゲームを活用した交流の場を提供。"
  }},
  "long_term_plan": {{
    "課題": "学校復帰",
    "現状": "中1秋から不登校が続いている",
    "ニーズ_本人": "友達と関われるようになりたい",
    "ニーズ_保護者": "高校進学を実現したい",
    "目標": "段階的な学校復帰を目指す",
    "方法": "まず保健室登校から始め、徐々に教室での活動を増やす"
  }},
  "missing_info": [
    "学習状況の詳細が不足しています",
    "家庭環境の詳細が不明です"
  ]
}}
"""

REPORT_PROMPT = """
以下の面談メモを、報告書用の詳細な文章に整形してください。

【重要】
- 1200～1500文字程度（印刷時2ページに収まる）
- です・ます調
- セクション分けして読みやすく
- 「◎」「○」などの記号を使って構造化
- 観察した様子、会話内容を具体的に

【推奨構成】
【時間】
{time}

【支援内容】
初回アセスメント

【面談内容】
◎当日の様子
（本人の様子、服装、表情、会話の流れなど具体的に記述）

【近況】
（最近の生活、変化があったことを詳しく）
・登校状況：
・生活リズム：
・学習状況：
・対人関係：
・その他：

○支援についての希望
・曜日：
・時間：
・場所：
・その他の要望：

【本人情報】
（基本情報、検査結果、通院状況など）
・{school} {grade}年生
・通院状況：{medical_info}

【次回の予定】
（次回面談や確認事項）

---

【面談メモ】
{memo}

【面談情報】
- 場所：{place}
"""

